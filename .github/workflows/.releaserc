branches:
  - name: main
  - name: dev
    prerelease: dev

plugins:
  - - "@semantic-release/exec"
    - verifyReleaseCmd: "echo  \"RELEASE_VERSION=${nextRelease.version}\" >> $GITHUB_ENV"

  - - "@semantic-release/commit-analyzer"
    - preset: conventionalcommits

  - - "@semantic-release/release-notes-generator"
    - preset: conventionalcommits

  - - "@semantic-release/github"
    - assets:
        - path: ../../artifacts/EAVFW.Compo.*.nupkg
          label: Compo

  - - "@semantic-release/exec"
    - publishCmd: "dotnet nuget push ../../artifacts/EAVFW.Compo.${process.env.RELEASE_VERSION}.nupkg --source https://api.nuget.org/v3/index.json --api-key ${process.env.CI_NUGET_API_KEY}"
